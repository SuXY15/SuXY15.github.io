<h3 id="一问题重述">一、问题重述</h3>

<ul>
  <li>
    <p><a href="https://leetcode-cn.com/problems/strong-password-checker/description/">LeetCode 420. strong-password-checker</a></p>
  </li>
  <li>需要做的操作：
    <ul>
      <li>字数限制：少于6个时优先插入，多于20个时优先删除</li>
      <li>种类限制：种类不足3种（小写字母、大写字母、数字）时，优先插入或替换</li>
      <li>重复限制：不得连续重复超过3次</li>
    </ul>
  </li>
  <li>分析：
    <ul>
      <li>出现连续的长字符串(<code class="highlighter-rouge">长度l&gt;=3</code>)时：
        <ul>
          <li>若超出长度大于总超出长度，优先删除至等长，再进行替换。优先删除较短的长字符串（长度为<code class="highlighter-rouge">k</code>需要<code class="highlighter-rouge">k-2</code>次删除，或<code class="highlighter-rouge">(k-2)/3</code>次替换）</li>
          <li>若总长度未超，优先替换</li>
          <li>若总长度不足，优先插入，替换次之</li>
        </ul>
      </li>
      <li>出现种类不足时：
        <ul>
          <li>若总长度不足，优先插入，替换次之</li>
          <li>若总长度未超，优先替换</li>
          <li>若总长度超出，优先删除长度大于3的较短字符串，并尽量保留种类，再替换</li>
        </ul>
      </li>
      <li>仅剩长度异常时：
        <ul>
          <li>长度不足时，优先插入</li>
          <li>长度超出时，优先删除</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>案例：</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">string</th>
          <th style="text-align: center">num</th>
          <th style="text-align: center">[insert, replace, ,delete]</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">“ABABABABABABABABABAB1”</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">[0,1,1]</td>
        </tr>
        <tr>
          <td style="text-align: center">“aaaaa”</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">[1,1,0]</td>
        </tr>
        <tr>
          <td style="text-align: center">“1010101010aaaB10101010”</td>
          <td style="text-align: center">2</td>
          <td style="text-align: center">[0,0,2]</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h3 id="二c-ac代码">二、<code class="highlighter-rouge">C++</code> AC代码</h3>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="n">Comp</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="k">operator</span> <span class="p">()</span> <span class="p">(</span><span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">&gt;</span> <span class="n">y</span> <span class="o">%</span> <span class="mi">3</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">strongPasswordChecker</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">Comp</span><span class="o">&gt;</span> <span class="n">pq</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">ans</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="mi">111</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">s</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
        <span class="kt">int</span> <span class="n">numi</span><span class="o">=</span> <span class="n">size</span><span class="o">&lt;</span><span class="mi">6</span> <span class="o">?</span> <span class="mi">6</span><span class="o">-</span><span class="n">size</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// at least insert: numi</span>
        <span class="kt">int</span> <span class="n">numd</span><span class="o">=</span> <span class="n">size</span><span class="o">&gt;</span><span class="mi">20</span><span class="o">?</span> <span class="n">size</span><span class="o">-</span><span class="mi">20</span><span class="o">:</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// at least delete: numd</span>
        <span class="kt">int</span> <span class="n">i</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="c1">// cal type number</span>
        <span class="k">while</span><span class="p">(</span><span class="o">++</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">){</span>
            <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="p">){</span>
                <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">-</span><span class="mi">99</span><span class="o">&gt;</span><span class="mi">0</span>  <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="sc">'z'</span> <span class="o">&amp;&amp;</span>  <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&gt;=</span><span class="sc">'a'</span><span class="p">)</span> <span class="n">flag</span> <span class="o">-=</span> <span class="mi">100</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">%</span><span class="mi">100</span><span class="o">&gt;</span><span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="sc">'Z'</span> <span class="o">&amp;&amp;</span>  <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&gt;=</span><span class="sc">'A'</span><span class="p">)</span> <span class="n">flag</span> <span class="o">-=</span> <span class="mi">10</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">%</span><span class="mi">10</span><span class="o">&gt;</span><span class="mi">0</span>  <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&lt;=</span><span class="sc">'9'</span> <span class="o">&amp;&amp;</span>  <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">&gt;=</span><span class="sc">'0'</span><span class="p">)</span> <span class="n">flag</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="n">numf</span> <span class="o">=</span> <span class="p">(</span><span class="n">flag</span><span class="o">&gt;</span><span class="mi">99</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">flag</span><span class="o">%</span><span class="mi">100</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">flag</span><span class="o">%</span><span class="mi">10</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">);</span>
        <span class="c1">// cal repeatment</span>
        <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">){</span>
            <span class="k">while</span><span class="p">(</span><span class="n">j</span><span class="o">&lt;</span><span class="n">size</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="o">++</span><span class="n">j</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span> <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="p">);</span>
            <span class="n">i</span><span class="o">=</span><span class="n">j</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// delete</span>
        <span class="k">while</span><span class="p">(</span><span class="n">numd</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">pq</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;=</span><span class="mi">3</span><span class="p">)</span> <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="n">numd</span><span class="o">--</span><span class="p">,</span> <span class="n">ans</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// insert</span>
        <span class="k">while</span><span class="p">(</span><span class="n">numi</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">pq</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="o">&gt;=</span><span class="mi">3</span><span class="p">)</span> <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span> 
            <span class="n">numi</span><span class="o">--</span><span class="p">,</span> <span class="n">ans</span><span class="o">++</span><span class="p">,</span> <span class="n">numf</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// replace</span>
        <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">pq</span><span class="p">.</span><span class="n">empty</span><span class="p">()){</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span> <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
            <span class="n">ans</span> <span class="o">+=</span> <span class="n">i</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">numf</span> <span class="o">-=</span> <span class="n">i</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">numf</span> <span class="o">=</span> <span class="n">numf</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="n">numf</span><span class="p">;</span>
        <span class="n">numi</span> <span class="o">=</span> <span class="n">numi</span><span class="o">-</span><span class="n">numf</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">?</span> <span class="n">numi</span><span class="o">-</span><span class="n">numf</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">ans</span><span class="o">+</span><span class="n">numi</span><span class="o">+</span><span class="n">numf</span><span class="o">+</span><span class="n">numd</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

